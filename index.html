<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Publo</title>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <!-- Compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">

    <!-- Compiled and minified JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>


</head>
<body>

<div style="max-width:400px; margin-left: 300px">
    <p>Wpisz tutaj tagi jakie najlepiej opisują lokal który chcesz znaleźć. Przykład: piwo. Formularz nie wyszukuje, ale pomoże nam ulepszyć naszą wyszukiwarkę. Dzięki za pomoc</p>
    <div class="chips chips-autocomplete"></div>
    <a class="waves-effect waves-light btn" id="send-button">Send</a>

</div>
<script type="">

  var instance = M.Chips.getInstance($(".chips"));
  $('.chips-initial').chips({
    data: [{
      tag: 'piwo',
    }, {
      tag: 'wino',
    }, {
      tag: 'pub',
    }],
  });
  $('.chips-placeholder').chips({
    placeholder: 'Enter a tag',
    secondaryPlaceholder: '+Tag',
  });
  $('.chips-autocomplete').chips({
    autocompleteOptions: {
      data: {
        'piwo': null,
        'wino': null,
        'pub': null
      },
      limit: Infinity,
      minLength: 1
    }
  });

   var chip = {
    tag: 'chip content',
    image: '', //optional
  };

  $('#send-button').click(function() {
    var instance = M.Chips.getInstance($(".chips"));

    var xhr = new XMLHttpRequest();
    var url = "https://whereispublo.com:9443/customTags/xd";
    xhr.open("POST", url, true);
    //xhr.setRequestHeader("Content-Type", "application/json");
    //xhr.setRequestHeader("Access-Control-Request-Headers", "xs");
    xhr.onreadystatechange = function () {
        alert("Dzięki!");
        location.reload();
    };
    var data = JSON.stringify(instance.chipsData.map(function(e) {return e.tag;}));
    xhr.send(data);
  });



</script>

</body>
</html>