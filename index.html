<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Publo</title>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <!-- Compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">

    <!-- Compiled and minified JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>

    <style>
        .btn {
            background-color: #AF2577 !important;
        }
        input {
            color: white !important;
        }
        .chip:focus {
            background-color: #b4b4b4 !important;
            color: rgba(0,0,0,0.6) !important;
        }
    </style>

</head>
<body style="background-color: #000000; color: white; text-align: center;">
<img style="width:270px;" src="wyszukiwarka_tagi.png">
<div style="max-width:50%; margin-left: 25%">
    <br>Wpisz tutaj tagi jakie najlepiej opisują bar który chcesz znaleźć.
        Przykład: piwo karaoke ogródek
        Formularz nie wyszukuje, ale pomoże nam ulepszyć naszą wyszukiwarkę.
        </br>
        Dzięki za pomoc </br>
        <b>Aby dodać nowy tag wpisz i naciśnij ENTER!</b>
    </p>
    <div class="chips chips-autocomplete"></div>
    <a class="waves-effect waves-light btn" id="send-button">Send</a>

</div>
<script type="">

  var instance = M.Chips.getInstance($(".chips"));
  $('.chips-initial').chips({
    data: [{
      tag: 'piwo',
    }, {
      tag: 'wino',
    }, {
      tag: 'pub',
    }],
  });
  $('.chips-placeholder').chips({
    placeholder: 'Enter a tag',
    secondaryPlaceholder: '+Tag',
  });
  $('.chips-autocomplete').chips({
    autocompleteOptions: {
      data: {
        'piwo': null,
        'wino': null,
        'pub': null
      },
      limit: Infinity,
      minLength: 1
    }
  });

   var chip = {
    tag: 'chip content',
    image: '', //optional
  };

  $('#send-button').click(function() {
    var instance = M.Chips.getInstance($(".chips"));

    var xhr = new XMLHttpRequest();
    var url = "https://whereispublo.com:9443/customTags/xd";
    xhr.open("POST", url, true);
    //xhr.setRequestHeader("Content-Type", "application/json");
    //xhr.setRequestHeader("Access-Control-Request-Headers", "xs");
    xhr.onreadystatechange = function () {
        alert("Dzięki!");
        location.reload();
    };
    var data = JSON.stringify(instance.chipsData.map(function(e) {return e.tag;}));
    xhr.send(data);
  });



</script>

</body>
</html>